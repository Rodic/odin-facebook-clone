= form_for(@post) do |f|
  = f.text_area :content
  = f.hidden_field :user_id
  = f.submit "Post!"

%ul
  - current_user.timeline.each do |post|
    %li
      %p= link_to post.user.email, post.user

      .post_likes
        = pluralize(post.likes.size, "Like")
        - if (lid = current_user.liked?(post))
          = button_to "Unlike", like_path(lid), method: :delete
        - else
          = button_to "Like", post_likes_path(post), method: :post

      %p= link_to post.content, post
      %p= distance_of_time_in_words(post.created_at, Time.now)
      %ul
        - post.comments.each do |comment|
          %li
            = comment.content
            by
            = link_to comment.user.email, comment.user
            
            .comment_likes
              -if (lid = current_user.liked?(comment))
                = button_to "unlike", like_path(lid), method: :delete
              - else
                = button_to "like", comment_likes_path(comment), method: :post
      %br
